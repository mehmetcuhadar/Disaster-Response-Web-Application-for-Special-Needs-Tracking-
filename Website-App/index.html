
<!DOCTYPE html>
<html>
<head>
<title>W3.CSS Template</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="./Styles/style.css">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<style>
html,body,h1,h2,h3,h4 {font-family:"Lato", sans-serif}
.mySlides {display:none}
.w3-tag, .fa {cursor:pointer}
.w3-tag {height:15px;width:15px;padding:0;margin-top:6px}
#map{
            height:780px;
            width:100%;
        }
</style>
</head>
<body>

<!-- Links (sit on top) -->
<div class="w3-top">
  <div class="w3-row w3-large w3-deep-purple">
    <div class="w3-col s3">
      <a href="#" class="w3-button w3-block w3-hover-purple">
        <i class="fa fa-home"></i>  Home
      </a>
    </div>
    <div class="w3-col s3">
      <a href="#plans" class="w3-button w3-block w3-hover-purple">
        <i class="fa fa-pencil"></i>  Talep Gir
      </a>
    </div>
    <div class="w3-col s3">
      <a href="#about" class="w3-button w3-block w3-hover-purple">
        <i class="fa fa-newspaper-o"></i> About
      </a>
    </div>
    <div class="w3-col s3">
      <a href="#contact" class="w3-button w3-block w3-hover-purple">
        <i class="fa fa-user"></i> Giriş
      </a>
    </div>
  </div>
</div>

<!-- Content -->
<div class="w3-content" style="max-width:1100px;margin-top:80px;margin-bottom:80px">

  <div class="w3-center w3-padding-32">
    <span class="w3-xlarge w3-bottombar w3-border-deep-purple w3-padding-16">İHTİYAÇ HARİTASI</span>
  </div>
  <!-- Slideshow -->
  <div class="w3-container">

    <div id="map"></div>
    <script>
            function initMap(){
                var options = {
                    zoom:8,
                    center: {lat:39.55,lng:32.51}
                }

                var map = new
                google.maps.Map(document.getElementById('map'), options);
            }
        </script>
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDM85PokkPoz3kKN-JiZRrA6EZMyG58KlE&callback=initMap">

    </script>
  </div>
  
  <!-- Grid -->
  <div class="w3-row w3-container">
    <div class="w3-center w3-padding-64">
      <span class="w3-xlarge w3-bottombar w3-border-dark-grey w3-padding-16">Girebileceğiniz Talepler</span>
    </div>
    <div class="w3-col l3 m6 w3-red w3-container w3-padding-16 w3-center">
      <h3>Arama Kurtarma</h3>
      <p> Arama kurtarma talepleriniz için AFAD ile iletişime geçilecektir.</p>
    </div>

    <div class="w3-col l3 m6 w3-blue w3-container w3-padding-16 w3-center">
      <h3>Su & Yiyecek</h3>
      <p>Talebinizi girerken lütfen kişi sayısını da belirtiniz.</p>
    </div>

    <div class="w3-col l3 m6 w3-green w3-container w3-padding-16 w3-center">
      <h3>Tıbbi Malzeme</h3>
      <p>Talebinizi girerken ilacın adını lütfen belirtiniz.</p>
    </div>

    <div class="w3-col l3 m6 w3-black w3-container w3-padding-16 w3-center">
      <h3>Diğer</h3>
      <p>Bu bölümde her türlü kalan taleplerinizi girebilirsiniz.</p>
    </div>
  </div>

  <!-- Grid -->
  <div class="w3-row-padding" id="plans">
    <div class="w3-center w3-padding-64">
      <span class="w3-xlarge w3-bottombar w3-border-dark-grey w3-padding-16">Talep Giriniz</span>
    </div>
    <form>
      <div class="form-row">
        <div class="form-group" style="flex: 1; width: 50%;">
          <label for="sehir">İl:</label>
          <select id="sehir" name="province">
            <option value="">--İL SEÇİNİZ--</option>
          </select>
        </div>
        <div class="form-group" style="flex: 1; width: 50%;">
          <label for="ilce">İlçe:</label>
          <select id="ilce" name="district">
            <option value="">--İLÇE SEÇİNİZ--</option>
          </select>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group" style="flex: 1; width: 50%;">
          <label for="mahalle">Mahalle:</label>
          <select id="mahalle" name="neighborhood">
            <option value="">--MAHALLE SEÇİNİZ--</option>
          </select>
        </div>
        <div class="form-group" style="flex: 1; width: 50%;">
          <label for="sokak">Sokak:</label>
          <select id="sokak" name="street">
            <option value="">--SOKAK SEÇİNİZ--</option>
          </select>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group" style="flex: 1; width: 50%;">
          <label for="apartment">Site Adı:</label>
          <input type="text" id="apartment" name="apartment">
        </div>
        <div class="form-group" style="flex: 1; width: 50%;">
          <label for="building">Apartman:</label>
          <input type="text" id="building" name="building">
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="phone">Telefon Numarası:</label>
          <input type="tel" id="phone" name="phone" placeholder="Başında 0 olmadan giriniz.">
        </div>
        <div class="form-group">
          <label for="special-needs">İhtiyaç:</label>
          <select id="special-needs" name="special-needs">
            <option value="">--Select--</option>
            <option value="water">Water</option>
            <option value="rescue-team">Rescue Team</option>
            <option value="food">Food</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label for="additional-info">Ek Bilgi:</label>
          <textarea id="additional-info" name="additional-info"></textarea>
        </div>
        <div>
          <button class="w3-btn w3-deep-purple" style="width: 100%;">Talebi Kaydet</button>
        </div>
  </form>
    
    

    
  </div>

  <!-- Grid -->
  <div class="w3-container" id = "about">
    <h2>Ekip</h2>
    <ul class="w3-ul w3-card-4">
      <li class="w3-bar">
        <img src="img/img_avatar.png" class="w3-bar-item w3-circle w3-hide-small" style="width:85px">
        <div class="w3-bar-item">
          <span class="w3-large">Alp</span><br>
          <span>Frontend Designer</span>
        </div>
      </li>
  
      <li class="w3-bar">
        <img src="img/img_avatar.png" class="w3-bar-item w3-circle w3-hide-small" style="width:85px">
        <div class="w3-bar-item">
          <span class="w3-large">Doğukan</span><br>
          <span>Database Management</span>
        </div>
      </li>
  
      <li class="w3-bar">
        <img src="img/img_avatar2.png" class="w3-bar-item w3-circle w3-hide-small" style="width:85px">
        <div class="w3-bar-item">
          <span class="w3-large">Hatice</span><br>
          <span>Frontend Designer</span>
        </div>
      </li>

      <li class="w3-bar">
        <img src="img/img_avatar.png" class="w3-bar-item w3-circle w3-hide-small" style="width:85px">
        <div class="w3-bar-item">
          <span class="w3-large">Mehmet</span><br>
          <span>Backend Designer</span>
        </div>
      </li>
    </ul>
  </div>

  <!-- Contact -->



</div>

<!-- Footer -->

<footer class="w3-container w3-padding-32 w3-light-grey w3-center">
  <h4>İletişim İçin</h4>
  <div class="w3-xlarge w3-section">
    <i class="fa fa-facebook-official w3-hover-opacity"></i>
    <i class="fa fa-instagram w3-hover-opacity"></i>
    <i class="fa fa-snapchat w3-hover-opacity"></i>
    <i class="fa fa-pinterest-p w3-hover-opacity"></i>
    <i class="fa fa-twitter w3-hover-opacity"></i>
    <i class="fa fa-linkedin w3-hover-opacity"></i>
  </div>
  <p>Powered by Koç Students</p>
</footer>

<script>
  // get references to the container elements
const sehirContainer = document.getElementById('sehir');
const ilceContainer = document.getElementById('ilce');
const mahalleContainer = document.getElementById('mahalle');
const sokakContainer = document.getElementById('sokak');
const saveButton = document.getElementById('save');
// make a GET request to the server endpoint to retrieve Sehir data
// get reference to the container element

// make a GET request to the server endpoint to retrieve Sehir data
axios.get('http://localhost:3000/getSehir')
  .then(response => {
    // create an option element for each Sehir document and append it to the dropdown
    response.data.forEach(sehir => {
      const sehirOption = document.createElement('option');
      sehirOption.textContent = sehir.sehir_title;
      sehirOption.value = sehir.sehir_key;
      sehirContainer.appendChild(sehirOption);
    });
  })
  .catch(error => {
    console.error(error);
  });


  sehirContainer.addEventListener('change', event => {
    const sehirKey = event.target.value;

    // clear the Ilce dropdown
    ilceContainer.innerHTML = '<option value="">-- Select an Ilce --</option>';

    // make a GET request to the server endpoint to retrieve Ilce data for the selected Sehir
    axios.get('http://localhost:3000/getIlce', {
      params: {
        il_key: sehirKey
      }
    })
      .then(response => {
        // create an HTML option element for each Ilce document and append it to the Ilce dropdown
        response.data.forEach(ilce => {
          const ilceOption = document.createElement('option');
          ilceOption.value = ilce.ilce_key;
          ilceOption.textContent = ilce.ilce_title;
          ilceContainer.appendChild(ilceOption);
        });
      })
      .catch(error => {
        console.error(error);
      });
  });


  ilceContainer.addEventListener('change', event => {
    const ilceKey = event.target.value;

    // clear the Ilce dropdown
    mahalleContainer.innerHTML = '<option value="">-- Select an Mahalle --</option>';

    // make a GET request to the server endpoint to retrieve Ilce data for the selected Sehir
    axios.get('http://localhost:3000/getMahalle', {
      params: {
        ilce_key: ilceKey
      }
    })
      .then(response => {
        // create an HTML option element for each Ilce document and append it to the Ilce dropdown
        response.data.forEach(mahalle => {
          const mahalleOption = document.createElement('option');
          mahalleOption.value = mahalle.mahalle_ilcekey;
          mahalleOption.textContent = mahalle.mahalle_title;
          mahalleContainer.appendChild(mahalleOption);
        });
      })
      .catch(error => {
        console.error(error);
      });
  });


  mahalleContainer.addEventListener('change', event => {
    const mahalleKey = event.target.value;

    // clear the Ilce dropdown
    sokakContainer.innerHTML = '<option value="">-- Select an Mahalle --</option>';

    // make a GET request to the server endpoint to retrieve Ilce data for the selected Sehir
    axios.get('http://localhost:3000/getSokak', {
      params: {
        mahalle_key: mahalleKey
      }
    })
      .then(response => {
        // create an HTML option element for each Ilce document and append it to the Ilce dropdown
        response.data.forEach(sokak => {
          console.log(mahalleKey);
          const sokakOption = document.createElement('option');
          sokakOption.value = sokak.sokak_cadde_mahallekey;
          sokakOption.textContent = sokak.sokak_cadde_title;
          sokakContainer.appendChild(sokakOption);
        });
      })
      .catch(error => {
        console.error(error);
      });
  }); 



// Add a click event listener to the button
saveButton.addEventListener('click', () => {
  // Get the input values from the form
  const il_title = sehirContainer.options[sehirContainer.selectedIndex].textContent;
  const ilce_title = ilceContainer.options[ilceContainer.selectedIndex].textContent;
  const mahalle_title = mahalleContainer.options[mahalleContainer.selectedIndex].textContent;
  const sokak_cadde_title = sokakContainer.options[sokakContainer.selectedIndex].textContent;
  console.log(il_title, ilce_title, mahalle_title, sokak_cadde_title);
  // Send the GET request to the server using Axios
  axios.get('http://localhost:3001/addInput', {
    params: {
      il_title,
      ilce_title,
      mahalle_title,
      sokak_cadde_title
    }
  })
  .then((response) => {
    console.log(response.data); // Display the response data in the console
  })
  .catch((error) => {
    console.log(error); // Display the error in the console
  });
});
</script>


</body>
</html>
